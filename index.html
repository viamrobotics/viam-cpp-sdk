<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Viam C++ SDK: Viam C++ SDK</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Viam C++ SDK<span id="projectnumber">&#160;current</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Viam C++ SDK </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_README"></a> </p>
<h1><a class="anchor" id="autotoc_md1"></a>
Resources</h1>
<ul>
<li><a href="https://cpp.viam.dev">Documentation</a></li>
<li><a href="https://github.com/viamrobotics/viam-cpp-sdk/tree/main/src/viam/examples">Examples</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md2"></a>
Repository Layout</h1>
<ul>
<li><code>src/viam/sdk</code> The implementation of the C++ sdk library</li>
<li><code>src/viam/api</code> All the google and viam api autogen files</li>
<li><code>src/viam/examples</code> A list of examples</li>
</ul>
<h1><a class="anchor" id="autotoc_md3"></a>
Getting Started</h1>
<p>Please see <a href="https://github.com/viamrobotics/viam-cpp-sdk/blob/main/BUILDING.md">BUILDING.md</a> for instructions on how to use CMake-based build system for this project.</p>
<p>NOTE: Windows is not supported. If you are using Windows, build the project in WSL.</p>
<h1><a class="anchor" id="autotoc_md4"></a>
Using Docker for Development</h1>
<p>Some Dockerfiles are provided for C++ SDK development, either for developing on the SDK itself, or for module development. The docker images are split up into base images, found in <a href="etc/docker/base-images">etc/docker/base-images</a>, and an <a href="etc/docker/Dockerfile.sdk-build">SDK build image</a>. The base images install apt packages required to build and develop the SDK, whereas the SDK build image is meant to be built on top of a base image using multi-stage Docker building.</p>
<p>From the root of this repository, run </p><div class="fragment"><div class="line">docker build -t base/bullseye -f etc/docker/base-images/Dockerfile.debian.bullseye .</div>
</div><!-- fragment --><p> This will create a Debian Bullseye base image. Note the use of the <code>-t base/bullseye</code> arg to assign a tag to the image, which is important for the next step. You can then use <code>Dockerfile.sdk-build</code> in a couple different ways.</p>
<div class="fragment"><div class="line">docker build --build-arg BASE_TAG=base/bullseye --build-arg GIT_TAG=[...] -f etc/docker/Dockerfile.sdk-build .</div>
</div><!-- fragment --><p>This will use <code>base/bullseye</code> as a base to build the SDK version provided in <code>GIT_TAG</code>, which should be a tagged release version. The SDK will be cloned from <a href="https://github.com/viamrobotics/viam-cpp-sdk/">https://github.com/viamrobotics/viam-cpp-sdk/</a>. This is the recommended approach for C++ module development, which should generally be done against a tagged release.</p>
<p>You can also do </p><div class="fragment"><div class="line">docker build --build-arg BASE_TAG=base/bullseye --build-arg REPO_SETUP=copy -f etc/docker/Dockerfile.sdk-build .</div>
</div><!-- fragment --><p>Note the use of the build argument <code>REPO_SETUP=copy</code>, which adds a Docker instruction to copy the SDK repo from the current working directory, rather than cloning from GitHub. This approach may make more sense for developing on the SDK itself, or if your C++ SDK development relies on a localversion of the SDK.</p>
<p>The examples above illustrated the use of several <code>--build-arg</code> arguments, namely <code>BASE_TAG</code>, <code>GIT_TAG</code>, and <code>REPO_SETUP</code>. Please see <a href="etc/docker/Dockerfile.sdk-build">Dockerfile.sdk-build</a> for a complete account of all build arguments and their defaults.</p>
<h1><a class="anchor" id="autotoc_md5"></a>
Building Documentation Locally for Testing</h1>
<p>The C++ sdk uses <a href="https://www.doxygen.nl/">Doxygen</a> to generate documentation. An automated workflow will generate and update our documentation on each merge, and publish it to <a href="https://cpp.viam.dev">cpp.viam.dev</a>.</p>
<p>Generating documentation locally to observe changes while developing with the C++ SDK is simple. First, make sure doxygen is installed, e.g., </p><div class="fragment"><div class="line">(on mac) brew install doxygen</div>
<div class="line">(on linux) apt-get install -y doxygen</div>
</div><!-- fragment --><p>Next, generate the documentation. From the SDK root, run: </p><div class="fragment"><div class="line">./bin/build-docs.sh</div>
</div><!-- fragment --><p>That will run <code>doxygen Doxyfile</code> and create the <code>etc/docs/api/current</code> folder. Then simply open the <code>index.html</code> file in your preferred browser to view the documentation.</p>
<h1><a class="anchor" id="autotoc_md6"></a>
A Note on Connectivity and webRTC Functionality</h1>
<p>The rust webRTC implementation (which C++ relies on via rust's foreign function interface) is still new, and liable to have bugs. At a minimum, we expect that calls to <code>ShellService::shell()</code> have a high likelihood of strange behavior. If you encounter any issues with streaming requests over webRTC, direct dial (by disabling webrtc as above) should resolve them. And please file a bug report! We will endeavor to be as responsive as possible, and resolve issues as quickly as possible.</p>
<h1><a class="anchor" id="autotoc_md7"></a>
A note on logging</h1>
<p>Users should only interact with logging via the macros, classes, and functions in <a href="src/viam/sdk/log/logging.hpp"><code>viam/sdk/log/logging.hpp</code></a>. Logging is implemented using Boost.Log, but this is an implementation detail subject to change without warning. In particular, using Boost.Log macros such as <code>BOOST_LOG_TRIVIAL</code> or <code>BOOST_LOG_SEV</code> is undefined behavior which will likely fail to output log messages.</p>
<h1><a class="anchor" id="autotoc_md8"></a>
Running Tests</h1>
<p>Tests for the SDK are located in <code>src/viam/sdk/tests</code>. The CMakeLists.txt file in that directory defines how to build them. When the SDK is built, the test executables are placed in the test folder within your specified build directory (e.g., <code>build</code>, if you followed the instructions in <a href="https://github.com/viamrobotics/viam-cpp-sdk/blob/main/BUILDING.md"><code>BUILDING.md</code></a>). The test executable files can be run individually. To run the entire test suite at once, navigate to the <code>tests</code> folder in your build directory and run: </p><div class="fragment"><div class="line">ctest</div>
</div><!-- fragment --><p> Or to avoid navigating all the way to the folder you can specify the test directory, for example: </p><div class="fragment"><div class="line">ctest --test-dir build/src/viam/sdk/tests/</div>
</div><!-- fragment --><p> Additionally, for more useful ctest options explore: </p><div class="fragment"><div class="line">ctest --help</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md9"></a>
License</h1>
<p>Copyright 2022 Viam Inc.</p>
<p>Apache 2.0 - See <a href="https://github.com/viamrobotics/viam-cpp-sdk/blob/main/LICENSE">LICENSE</a> file </p>
</div></div><!-- PageDoc -->
<a href="doxygen_crawl.html"/>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
